<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suspicious Potatoes - Green Potatoes</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <main class="landing-container">
        
        <header class="site-header">
            <a href="index.html" class="home-link">
                <h1 class="logo">ðŸ¥” Suspicious Potatoes ðŸ¥”</h1>
                <p class="subtitle">Movies on the Brink!</p>
            </a>
            <nav class="header-nav">
                <a href="review.html" class="review-btn">Write a Review</a>
            </nav>
        </header>

        <div id="movie-list" class="movie-list-container">
            </div>

        <footer>
            <p>Ashoka Deskins - CS 351</p>
        </footer>

    </main>

    <script src="data.js"></script>
    <script src="script.js"></script>

    <script>
        // 1. Get processed data
        const allMovies = getProcessedMovies();

        // 2. Filter ONLY "Suspicious Potato" movies
        const suspiciousMovies = allMovies.filter(movie => movie.type === "Suspicious Potato");

        const container = document.getElementById('movie-list');

        if (suspiciousMovies.length === 0) {
            container.innerHTML = "<p>No suspicious potatoes found yet!</p>";
        } else {
            suspiciousMovies.forEach(movie => {
                const card = document.createElement('div');
                card.className = 'movie-card';

                // Build the reviews HTML list with Icons
                const reviewsHTML = movie.reviews.map(r => {
                    const iconFile = (r.score === 1) ? 'potato.png' : 'greenpotato.png';
                    const textDisplay = (r.text) ? `"${r.text}"` : "";
                    
                    return `
                        <div class="review-item">
                            <img src="${iconFile}" class="mini-potato"> 
                            ${textDisplay}
                        </div>
                    `;
                }).join('');

                card.innerHTML = `
                    <img src="${movie.image}" alt="${movie.title}" class="movie-poster">
                    <div class="movie-info">
                        <div class="movie-header">
                            <div class="movie-title">${movie.title}</div>
                            <div class="potato-badge" style="background-color: #b7b7a4;">${movie.score}%</div>
                        </div>
                        <p class="movie-desc">${movie.description}</p>
                        
                        <div class="review-section">
                            <div class="review-title">Viewer Reviews</div>
                            ${reviewsHTML}
                        </div>
                    </div>
                `;

                container.appendChild(card);
            });
        }
    </script>

</body>
</html>